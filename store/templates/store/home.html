{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Image Slider -->
    <div class="relative w-full h-96 md:h-[500px] overflow-hidden rounded-lg shadow-lg mb-12" id="slider">
        <!-- Slide 1 -->
        <div class="absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-100" id="slide-1">
            <img class="w-full h-full object-cover"
                 src="https://picsum.photos/seed/slide1/1600/600"
                 alt="Summer Collection is Here">
            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                <div class="text-center text-white p-4">
                    <h1 class="text-4xl md:text-6xl font-bold">Summer Collection is Here</h1>
                    <p class="mt-4 text-lg md:text-xl">Up to 50% Off on new arrivals</p>
                    <a class="mt-8 inline-block bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full transition-colors"
                       href="{% url 'store:product_list' %}?is_new=true"> Shop Now </a>
                </div>
            </div>
        </div>

        <!-- Slide 2 -->
        <div class="absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-0" id="slide-2">
            <img class="w-full h-full object-cover"
                 src="https://picsum.photos/seed/slide2/1600/600"
                 alt="For Men: Sharp & Stylish">
            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                <div class="text-center text-white p-4">
                    <h1 class="text-4xl md:text-6xl font-bold">For Men: Sharp & Stylish</h1>
                    <p class="mt-4 text-lg md:text-xl">Discover our new formal wear</p>
                    <a class="mt-8 inline-block bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full transition-colors"
                       href="{% url 'store:product_list' %}?gender=Men"> Shop Now </a>
                </div>
            </div>
        </div>

        <!-- Slide 3 -->
        <div class="absolute inset-0 transition-opacity duration-1000 ease-in-out opacity-0" id="slide-3">
            <img class="w-full h-full object-cover"
                 src="https://picsum.photos/seed/slide3/1600/600"
                 alt="Accessorize Your Look">
            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                <div class="text-center text-white p-4">
                    <h1 class="text-4xl md:text-6xl font-bold">Accessorize Your Look</h1>
                    <p class="mt-4 text-lg md:text-xl">Bags, watches, and more</p>
                    <a class="mt-8 inline-block bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full transition-colors"
                       href="{% url 'store:product_list' %}?category_slug=accessories"> Shop Now </a>
                </div>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <button class="absolute top-1/2 left-4 -translate-y-1/2 bg-white/50 hover:bg-white/80 p-3 rounded-full text-gray-800 focus:outline-none"
                onclick="prevSlide()">
            <i class="fa fa-chevron-left"></i>
        </button>
        <button class="absolute top-1/2 right-4 -translate-y-1/2 bg-white/50 hover:bg-white/80 p-3 rounded-full text-gray-800 focus:outline-none"
                onclick="nextSlide()">
            <i class="fa fa-chevron-right"></i>
        </button>

        <!-- Slide Indicators -->
        <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2">
            <button class="h-3 w-3 rounded-full transition-colors bg-white" onclick="goToSlide(0)"></button>
            <button class="h-3 w-3 rounded-full transition-colors bg-white/50" onclick="goToSlide(1)"></button>
            <button class="h-3 w-3 rounded-full transition-colors bg-white/50" onclick="goToSlide(2)"></button>
        </div>
    </div>

    <!-- Category Section -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold text-center mb-8">Shop by Category</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <!-- Jackets Category -->
            <a href="{% url 'store:product_list_by_category' 'jackets' %}"
               class="relative rounded-lg overflow-hidden group h-64">
                <img src="https://picsum.photos/seed/cat1/500/500"
                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                     alt="Jackets">
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                    <h3 class="text-white text-2xl font-bold">Jackets</h3>
                </div>
            </a>

            <!-- Dresses Category -->
            <a href="{% url 'store:product_list_by_category' 'dresses' %}"
               class="relative rounded-lg overflow-hidden group h-64">
                <img src="https://picsum.photos/seed/cat2/500/500"
                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                     alt="Dresses">
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                    <h3 class="text-white text-2xl font-bold">Dresses</h3>
                </div>
            </a>

            <!-- Shoes Category -->
            <a href="{% url 'store:product_list_by_category' 'shoes' %}"
               class="relative rounded-lg overflow-hidden group h-64">
                <img src="https://picsum.photos/seed/cat3/500/500"
                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                     alt="Shoes">
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                    <h3 class="text-white text-2xl font-bold">Shoes</h3>
                </div>
            </a>

            <!-- Accessories Category -->
            <a href="{% url 'store:product_list_by_category' 'accessories' %}"
               class="relative rounded-lg overflow-hidden group h-64">
                <img src="https://picsum.photos/seed/cat4/500/500"
                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                     alt="Accessories">
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                    <h3 class="text-white text-2xl font-bold">Accessories</h3>
                </div>
            </a>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section>
        <h2 class="text-3xl font-bold text-center mb-8">Featured Products</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% if featured_products %}
            {% for product in featured_products %}
            <div class="block group">
                {% include 'components/_product_card.html' with product=product %}
            </div>
            {% endfor %}
            {% else %}
            <!-- Show placeholder products if no featured products in database -->
            {% for i in "12345678" %}
            <div class="bg-white rounded-lg shadow-md overflow-hidden transition-shadow duration-300 hover:shadow-xl">
                <a href="#" class="block">
                    <div class="relative">
                        <img class="w-full h-80 object-cover"
                             src="https://picsum.photos/seed/product{{ i }}/600/800"
                             alt="Product {{ i }}">
                        <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-40 text-white text-center py-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            View Details
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="text-sm font-semibold text-gray-500 truncate">
                            Category - Gender
                        </h3>
                        <h2 class="text-lg font-bold text-gray-800 truncate mt-1">Product Name</h2>
                        <div class="flex items-baseline mt-2">
                            <p class="text-xl font-bold text-red-600">$99.99</p>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
            {% endif %}
        </div>
    </section>
</div>

<script>
    // Slider functionality
    let currentSlide = 0;
    const slides = document.querySelectorAll('[id^="slide-"]');
    const indicators = document.querySelectorAll('#slider .absolute.bottom-4 button');

    function showSlide(n) {
        // Hide all slides
        slides.forEach(slide => {
            slide.classList.remove('opacity-100');
            slide.classList.add('opacity-0');
        });

        // Show current slide
        slides[n].classList.remove('opacity-0');
        slides[n].classList.add('opacity-100');

        // Update indicators
        indicators.forEach((indicator, index) => {
            if (index === n) {
                indicator.classList.remove('bg-white/50');
                indicator.classList.add('bg-white');
            } else {
                indicator.classList.remove('bg-white');
                indicator.classList.add('bg-white/50');
            }
        });

        currentSlide = n;
    }

    function nextSlide() {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
    }

    function prevSlide() {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(currentSlide);
    }

    function goToSlide(n) {
        showSlide(n);
    }

    // Auto-rotate slides every 5 seconds
    setInterval(nextSlide, 5000);

    // Initialize slider
    document.addEventListener('DOMContentLoaded', function() {
        showSlide(0);
    });
</script>
{% endblock %}